-- MySQL Script generated by MySQL Workbench
-- lun 31 ago 2015 14:16:26 CST
-- Model: New Model    Version: 1.0
-- MySQL Workbench Forward Engineering

SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0;
SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0;
SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='TRADITIONAL,ALLOW_INVALID_DATES';

-- -----------------------------------------------------
-- Schema sigos
-- -----------------------------------------------------

-- -----------------------------------------------------
-- Schema sigos
-- -----------------------------------------------------
CREATE SCHEMA IF NOT EXISTS `sigos` DEFAULT CHARACTER SET utf8 COLLATE utf8_general_ci ;
USE `sigos` ;

-- -----------------------------------------------------
-- Table `sigos`.`telefono`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `sigos`.`telefono` (
  `id` INT NOT NULL AUTO_INCREMENT COMMENT '',
  `numeroTelefono` VARCHAR(45) NOT NULL COMMENT '',
  `detalle` VARCHAR(45) NOT NULL COMMENT '',
  PRIMARY KEY (`id`)  COMMENT '')
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `sigos`.`Paciente`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `sigos`.`Paciente` (
  `id` INT NOT NULL AUTO_INCREMENT COMMENT '',
  `nombrePaciente` VARCHAR(45) NOT NULL COMMENT '',
  `apellido1Paciente` VARCHAR(45) NOT NULL COMMENT '',
  `apellido2Paciente` VARCHAR(45) NOT NULL COMMENT '',
  `sexo` TINYINT NOT NULL COMMENT '',
  `fechaNacimientoPaciente` DATE NOT NULL COMMENT '',
  `nacionalidadPaciente` VARCHAR(45) NOT NULL COMMENT '',
  `cedulaPaciente` VARCHAR(45) NOT NULL COMMENT '',
  `idtelefono` INT NULL COMMENT '',
  `direccion1` VARCHAR(45) NOT NULL COMMENT '',
  `direccion2` VARCHAR(45) NULL COMMENT '',
  `email` VARCHAR(45) NOT NULL COMMENT '',
  PRIMARY KEY (`id`)  COMMENT '',
  INDEX `fk_telefono_idx` (`idtelefono` ASC)  COMMENT '',
  CONSTRAINT `fk_telefono`
    FOREIGN KEY (`idtelefono`)
    REFERENCES `sigos`.`telefono` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `sigos`.`ExamenMedico`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `sigos`.`ExamenMedico` (
  `id` INT NOT NULL AUTO_INCREMENT COMMENT '',
  `archivoExamen` BLOB NULL COMMENT '',
  PRIMARY KEY (`id`)  COMMENT '')
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `sigos`.`Padecimientos`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `sigos`.`Padecimientos` (
  `id` INT NOT NULL AUTO_INCREMENT COMMENT '',
  `nombrePadecimiento` VARCHAR(45) NOT NULL COMMENT '',
  `descripcion` VARCHAR(45) NULL COMMENT '',
  PRIMARY KEY (`id`)  COMMENT '')
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `sigos`.`Alergias`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `sigos`.`Alergias` (
  `id` INT NOT NULL AUTO_INCREMENT COMMENT '',
  `nombreAlergia` VARCHAR(45) NOT NULL COMMENT '',
  `descripcionAlergia` VARCHAR(45) NOT NULL COMMENT '',
  PRIMARY KEY (`id`)  COMMENT '')
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `sigos`.`Vacunas`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `sigos`.`Vacunas` (
  `id` INT NOT NULL AUTO_INCREMENT COMMENT '',
  `tipo` VARCHAR(45) NOT NULL COMMENT '',
  `fechaAplicacion` DATE NOT NULL COMMENT '',
  PRIMARY KEY (`id`)  COMMENT '')
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `sigos`.`AntecedentesPersonales`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `sigos`.`AntecedentesPersonales` (
  `id` INT NOT NULL AUTO_INCREMENT COMMENT '',
  `idAlergias` INT NULL COMMENT '',
  `tratamiento` VARCHAR(45) NOT NULL COMMENT '',
  `idPadecimientos` INT NULL COMMENT '',
  `idVacunas` INT NULL COMMENT '',
  `medicamento` VARCHAR(45) NOT NULL COMMENT '',
  PRIMARY KEY (`id`)  COMMENT '',
  INDEX `fk_padecimientos_idx` (`idPadecimientos` ASC)  COMMENT '',
  INDEX `fk_alergias_idx` (`idAlergias` ASC)  COMMENT '',
  INDEX `fk_vacunas_idx` (`idVacunas` ASC)  COMMENT '',
  CONSTRAINT `fk_padecimientos`
    FOREIGN KEY (`idPadecimientos`)
    REFERENCES `sigos`.`Padecimientos` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_alergias`
    FOREIGN KEY (`idAlergias`)
    REFERENCES `sigos`.`Alergias` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_vacunas`
    FOREIGN KEY (`idVacunas`)
    REFERENCES `sigos`.`Vacunas` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `sigos`.`AntecedentesFamiliares`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `sigos`.`AntecedentesFamiliares` (
  `id` INT NOT NULL AUTO_INCREMENT COMMENT '',
  `idPadecimientos` INT NOT NULL COMMENT '',
  `parentesco` VARCHAR(45) NOT NULL COMMENT '',
  PRIMARY KEY (`id`)  COMMENT '')
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `sigos`.`ExpedienteMedico`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `ExpedienteMedico`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `ExpedienteMedico` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `idPaciente` int(11) NOT NULL,
  `idAntecedentesPersonales` int(11) NOT NULL,
  `idAntecedentesFamiliares` int(11) NOT NULL,
  PRIMARY KEY (`id`),
  KEY `fk_paciente_idx` (`idPaciente`),
  KEY `fk_antecedentesPersonales_idx` (`idAntecedentesPersonales`),
  KEY `fk_antecedentesFamiliares_idx` (`idAntecedentesFamiliares`),
  CONSTRAINT `fk_antecedentesFamiliares` FOREIGN KEY (`idAntecedentesFamiliares`) REFERENCES `AntecedentesFamiliares` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION,
  CONSTRAINT `fk_antecedentesPersonales` FOREIGN KEY (`idAntecedentesPersonales`) REFERENCES `AntecedentesPersonales` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION,
  CONSTRAINT `fk_paciente` FOREIGN KEY (`idPaciente`) REFERENCES `Paciente` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION
) ENGINE=InnoDB AUTO_INCREMENT=4 DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;


-- -----------------------------------------------------
-- Table `sigos`.`ExamenFisico`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `ExamenFisico`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `ExamenFisico` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `categoria` varchar(45) DEFAULT NULL,
  `subCategoria` varchar(45) DEFAULT NULL,
  `detalle` varchar(45) DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--------------------------------------------------------
-- ExamenFisico-Expediente
--------------------------------------------------------
DROP TABLE IF EXISTS `ExamenFisico-Expediente`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `ExamenFisico-Expediente` (
  `id` int(11) NOT NULL,
  `idExamenFisico` int(11) DEFAULT NULL,
  `idExpediente` int(11) DEFAULT NULL,
  PRIMARY KEY (`id`),
  KEY `fkExamenFisico_idx` (`idExamenFisico`),
  KEY `fkExpediente_idx` (`idExpediente`),
  KEY `Expediente_idx` (`idExpediente`),
  CONSTRAINT `Expediente` FOREIGN KEY (`idExpediente`) REFERENCES `ExamenFisico` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION,
  CONSTRAINT `fkExamenFisico` FOREIGN KEY (`idExamenFisico`) REFERENCES `ExamenFisico` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION
) ENGINE=InnoDB DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;


-- -----------------------------------------------------
-- Table `sigos`.`Cita`
-- -----------------------------------------------------
CREATE  TABLE IF NOT EXISTS `sigos`.`Cita` (
  `idcita` INT NOT NULL AUTO_INCREMENT ,
  `estado` TINYINT NOT NULL ,
  `fechaConsulta` DATE NULL ,
  `anotaciones` VARCHAR(200) NULL ,
  `hora` VARCHAR(10) NULL ,
  PRIMARY KEY (`idcita`) )
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `sigos`.`Receta`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `sigos`.`Receta` (
  `id` INT NOT NULL AUTO_INCREMENT COMMENT '',
  `nombreMedicamento` VARCHAR(45) NOT NULL COMMENT '',
  `cantidad` INT NOT NULL COMMENT '',
  PRIMARY KEY (`id`)  COMMENT '')
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `sigos`.`SignosVitales`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `sigos`.`SignosVitales` (
  `id` INT NOT NULL AUTO_INCREMENT COMMENT '',
  `peso` DOUBLE NOT NULL COMMENT '',
  `FC` DOUBLE NOT NULL COMMENT '',
  `PAR` DOUBLE NOT NULL COMMENT '',
  `IMC` DOUBLE NOT NULL COMMENT '',
  `IMB` DOUBLE NOT NULL COMMENT '',
  `H2O` DOUBLE NOT NULL COMMENT '',
  `MM` DOUBLE NOT NULL COMMENT '',
  `GC` DOUBLE NOT NULL COMMENT '',
  `AS` TINYINT(1) NOT NULL COMMENT '',
  `AF` TINYINT(1) NOT NULL COMMENT '',
  `SS` TINYINT(1) NOT NULL COMMENT '',
  `PAP` TINYINT(1) NOT NULL COMMENT '',
  `IM` TINYINT(1) NOT NULL COMMENT '',
  `IV` TINYINT(1) NOT NULL COMMENT '',
  `SC` TINYINT(1) NOT NULL COMMENT '',
  `GM` TINYINT(1) NOT NULL COMMENT '',
  `CP` TINYINT(1) NOT NULL COMMENT '',
  `ES` TINYINT(1) NOT NULL COMMENT '',
  `PA` TINYINT(1) NOT NULL COMMENT '',
  `exMama` TINYINT(1) NULL COMMENT '',
  `curaciones` TINYINT(1) NULL COMMENT '',
  `temperatura` DOUBLE NULL COMMENT '',
  `talla` DOUBLE NULL COMMENT '',
  PRIMARY KEY (`id`)  COMMENT '')
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `sigos`.`ConsultaMedica`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `ConsultaMedica`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `ConsultaMedica` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `idExpedienteMedico` int(11) NOT NULL,
  `idExamenFisico` int(11) DEFAULT NULL,
  `motivoConsulta` varchar(45) NOT NULL,
  `descripcionSintomas` varchar(45) NOT NULL,
  `diagnostico` varchar(45) DEFAULT NULL,
  `fechaCita` DATE NOT NULL
  `signosVitales` int(11) NOT NULL,
  `idReceta` int(11) DEFAULT NULL,
  PRIMARY KEY (`id`),
  KEY `fk_expedienteMedico_idx` (`idExpedienteMedico`),
  KEY `fk_receta_idx` (`idReceta`),
  KEY `fk_signosVitales_idx` (`signosVitales`),
  CONSTRAINT `fk_expedienteMedico` FOREIGN KEY (`idExpedienteMedico`) REFERENCES `ExpedienteMedico` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION,
  CONSTRAINT `fk_receta` FOREIGN KEY (`idReceta`) REFERENCES `Receta` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION,
  CONSTRAINT `fk_signosVitales` FOREIGN KEY (`signosVitales`) REFERENCES `SignosVitales` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION
) ENGINE=InnoDB DEFAULT CHARSET=utf8;


-- -----------------------------------------------------
-- Table `sigos`.`Inventario`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `sigos`.`Inventario` (
  `id` INT NOT NULL AUTO_INCREMENT COMMENT '',
  `nombre` VARCHAR(45) NOT NULL COMMENT '',
  `tipo` VARCHAR(45) NOT NULL COMMENT '',
  `descripcion` VARCHAR(45) NOT NULL COMMENT '',
  `cantidad` INT NOT NULL COMMENT '',
  PRIMARY KEY (`id`)  COMMENT '')
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `sigos`.`Usuario`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `sigos`.`Usuario` (
  `id` INT NOT NULL AUTO_INCREMENT COMMENT '',
  `nombreUsuario` VARCHAR(45) NOT NULL COMMENT '',
  `password` VARCHAR(45) NOT NULL COMMENT '',
  PRIMARY KEY (`id`)  COMMENT '')
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `sigos`.`AntecedentesPersonales-Padecimientos`
-- -----------------------------------------------------
CREATE  TABLE IF NOT EXISTS `sigos`.`AntecedentesPersonales-Padecimientos` (
  `id` INT NOT NULL AUTO_INCREMENT ,
  `idPadecimientos` INT NOT NULL ,
  `idAntecedentesPersonales` INT NOT NULL ,
  PRIMARY KEY (`Id`) ,
  INDEX `fk_Padecimientos_idx` (`IdPadecimientos` ASC) ,
  INDEX `fk_AntecendentesPersonales_idx` (`IdAntecedentesPersonales` ASC) ,
  CONSTRAINT `fk_Padecimientos2`
    FOREIGN KEY (`idPadecimientos` )
    REFERENCES `sigos`.`Padecimientos` (`id` )
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_AntecendentesPersonales2`
    FOREIGN KEY (`idAntecedentesPersonales` )
    REFERENCES `sigos`.`AntecedentesPersonales` (`id` )
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `sigos`.`AntecedentesFamiliares-Padecimientos`
-- -----------------------------------------------------
CREATE  TABLE IF NOT EXISTS `sigos`.`AntecedentesFamiliares-Padecimientos` (
  `Id` INT NOT NULL AUTO_INCREMENT ,
  `idPadecimiento` INT NOT NULL ,
  `idAntecedenteFamiliar` INT NOT NULL ,
  PRIMARY KEY (`Id`) ,
  INDEX `fk_Padecimiento3_idx` (`idPadecimiento` ASC) ,
  INDEX `fk_AntecedenteFam3_idx` (`idAntecedenteFamiliar` ASC) ,
  CONSTRAINT `fk_Padecimiento3`
    FOREIGN KEY (`idPadecimiento` )
    REFERENCES `sigos`.`Padecimientos` (`id` )
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_AntecedenteFam3`
    FOREIGN KEY (`idAntecedenteFamiliar` )
    REFERENCES `sigos`.`AntecedentesFamiliares` (`id` )
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;

USE `sigos` ;

ALTER TABLE `sigos`.`antecedentesfamiliares` CHANGE COLUMN `parentesco` `parentesco` VARCHAR(45) NOT NULL  AFTER `id` , CHANGE COLUMN `idPadecimientos` `descripcion` VARCHAR(100) NOT NULL  ;

SET SQL_MODE=@OLD_SQL_MODE;
SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS;
SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS;
